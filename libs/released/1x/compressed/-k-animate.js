(function t(e,r,n,a,i,u){"use strict";var o;var l=e.document.currentScript;var s=e[l.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor"];if(!s)throw new Error("-k-js-abstract.js is required.");var c=l.getAttributeNS(null,"kanilib-keyword")||"_kAni_Initor";var v=new s;var _=v.SymbolCollection();var m=v.FunctionCollection();var p=r.create;var d=r.defineProperty;var f=v.ClassCollection();var h=p(f._primitive_prototype);var b=p(h);v.ReleaseMethods(h);v.ReleaseMethods(b);var A=n.prototype;var y=A.call;var w=A.bind;var g=f.Republic;var C=f.Civilian;var S=m.shared_toString;var I=m.is_extensible_object;var T=m.is_valid_handler;var k=r.freeze;var P=b._kJs_setConst;var q=w.bind(P);var R=m.__setConst;var M=m.__addSetConsts;var E=m.__executePropertyMappers;var j=m.__clearAllPropertyMappers;var F=b._kJs_addSetConsts;var L=b._kJs_executePropertyMappers;var x=b._kJs_clearAllPropertyMappers;var V=i.prototype;var H=u.prototype;var W=V.get;var J=V.set;var N=V.delete;var D=V.forEach;var O=V.clear;var z=H.add;var G=H.delete;var B=Date.now;var K=p(null);var Q=p(null);var U=p(h);var X=a("check if paused");var Y=a("last executed timepoint");var Z=a("current timepoint");var $=a("duration");var tt=a("create an animate");var et=a("one unique animate");var rt=a("get animate parameters from animate");var nt=_.request;var at=_.unrequest;var it=_.SymbolCollection;var ut=_.FunctionCollection;var ot=_.ReleaseClasses;var lt=_.ClassCollection;var st=_.createdInstance;var ct=_.primitivePrototype;var vt=_.addMember;var _t=_.removeMember;var mt=_.clear;var pt=_.update;var dt=k({isPaused:X,lastTime:Y,currentTime:Z,duration:$,createAnimate:tt,animate:et,getAnimateParam:rt,__proto__:null});var ft=k({_prvEnsureConstructor:It,_prvCheckConstructorInstance:Tt,__proto__:null});var ht=new i;var bt=new i;var At=J.bind(ht);var yt=W.bind(ht);var wt=J.bind(bt);var gt=W.bind(bt);function Ct(t,e){At(t,new u);t.prototype=e}function St(t,e){var r=ht.get(t);if(r.has(e))throw new TypeError("Can't re-construct object. 'new' operator is required.");r.add(e)}function It(t,e,r){if(!Tt(t,e))throw new TypeError(r)}function Tt(t,e){var r=yt(t);return r&&r.has(e)}var kt=m._DescriptorGetterSetter1os3b;var Pt=m._setconst1oVs1v;var qt=m._setmtdfromcore2o1s;var Rt=m._setmtdfromcore2os;var Mt=m._setkeytokey1o2s3b;var Et=m._setkeytokey1o2s3b_inheritable;var jt=m._defgettersetter1o2s;var Ft=l.getAttributeNS(null,"kani-enum-type");Ft&&(Ft=Ft.toLocaleString());var Lt,xt;switch(Ft){case"int":case"integer":case"number":(function(){var t=0;var e=0;Lt=function(){var e=t;t+=1<<level;return e};xt=function(r){t=0;e=r>>0}})();break;default:e.console.warn("Attribute 'kani-enum-type' of this script element is set to an invalid value. Enum type will be Symbol by default.",l,l.getAttributeNodeNS(null,"kani-enum-type"));case null:case"symbol":Lt=function(t){return a(t)};xt=A}function Vt(t){if(!I(this))return new Vt(t);if(!T(t))throw new TypeError("arguments[0] is not a valid handler.");var r=this;St(Vt,r);t=t.bind(r);if(typeof t!=="function")throw new TypeError("arguments[0].bind() must return a function.");var n=true;var a,i;function u(e){var r=new Ht(i,e);t(r);i=e;a=requestAnimationFrame(u)}function o(t){requestAnimationFrame(u);i=t}function l(){a=requestAnimationFrame(o);n=false;console.log("activated",e.ddd={animate:r,firsthandler:o,handler:handler,id:a,callback:t,__proto__:h});return r}function s(){cancelAnimationFrame(a);n=true;return r}var c={get:function(){return n},set:function(t){(t?s:l)()},__proto__:null};Pt(r,[nt,"run"],l);Pt(r,[at,"pause"],s);d(r,"paused",c);d(r,X,c)}Ct(Vt,function ae(t){var e=q(t);e("run",null);e("pause",null);e("paused",true);e(X,true);e(nt,null);e(at,null);return t}(p(h)));Q._kAni_Animate=U.Animate=Vt;Vt.toString=S;Vt.user_manuals=["constructor Animate(function<void, Animate, AnimateParam> callback);"];function Ht(t,e){this[$]=(this[Z]=e)-(this[Y]=t)}(function(t){var e=t.prototype=p(h);R(Vt,"prvAnimateParam_prototype",e);Et(true);Mt(e,"now",Z);Mt(e,"last",Y);Mt(e,"duration",$);e[Z]=null;e[Y]=null;e[$]=0})(Ht);xt(0);var Wt=Lt("Stage.FIRST_IMPACT");var Jt=Lt("Stage.WHILE_IMPACT");var Nt=Lt("Stage.AFTER_IMPACT");(function(t){var e=q(t);e("FIRST_IMPACT",Wt);e("WHILE_IMPACT",Jt);e("AFTER_IMPACT",Nt)})(Dt);function Dt(t,e,r){if(!I(this))return new Dt(t,e,r);if(!T(t))throw new TypeError("arguments[0] is not a valid handler.");if(!T(e))throw new TypeError("arguments[1] is not a valid handler.");var n=this;St(Dt,n);t=t.bind(n);e=e.bind(n);var a=new i;var u=new i;var o=J.bind(a);var l=N.bind(a);var s=D.bind(a);var c=O.bind(a);var v=W.bind(u);var _=J.bind(u);var m;var p=new Vt(function(t){m=t;g()});var f=p[nt];var h=p[at];function b(n){var a=false,i;return function(){if(t(r,n)){i=a?Jt:(a=true,Wt)}else if(a){a=false;i=Nt}else return;e(r,n,i)}}function A(t){var e=v(t);if(!e){e=b(t);_(t)}o(t,e);return n}function y(t){l(t);return n}function w(){c();return n}function g(){s(function(t){t()});return n}function C(t){var e=v(t)||b(t);return new Vt(function(t){m=t;e()})}function S(){f();return n}function k(){h();return n}function P(){return m}Pt(n,[vt,"add"],A);Pt(n,[_t,"remove"],y);Pt(n,[mt,"clear"],w);Pt(n,[pt,"update"],g);Pt(n,[tt,"createAnimateWith"],C);Pt(n,[et,"animate"],p);Pt(n,[nt,"run"],S);Pt(n,[at,"pause"],k);Pt(n,[rt,"getAnimateParam"],P);var q=new kt(p,X);d(n,"paused",q);d(n,X,q)}Ct(Dt,function(t){var e=q(t);e("add",null);e("remove",null);e("clear",null);e("update",null);e("createAnimateWith",null);e("animate",null);e("run",null);e("pause",null);e("getAnimateParam",null);e("paused",null);e(vt,null);e(_t,null);e(mt,null);e(pt,null);e(tt,null);e(et,null);e(nt,null);e(at,null);e(rt,null);e(X,null);e("FIRST_IMPACT",Wt);e("WHILE_IMPACT",Jt);e("AFTER_IMPACT",Nt);return t}(p(h)));Q._kAni_Stage=U.Stage=Dt;Dt.toString=S;Dt.user_manuals=["constructor Stage(ImpactDetector impact_detector, ImpactHandler impact_handler, LActor l_actor);","typedef function<bool, Stage, LActor, RActor> ImpactDetector;","typedef function<void, Stage, LActor, RActor, ImpactType> ImpactHandler;","typedef any LActor, RActor;","enum ImpactType { FIRST_IMPACT, WHILE_IMPACT, AFTER_IMPACT }"];function Ot(t,e){wt(t,this);this.object=t;var r=e[nt];var n=e[at];var a=this._republic=new g(function(t){(t?n:r)()});this.__add=a[vt];this.__remove=a[_t];this.__execute=a[pt]}Ot.prototype=p({__add:null,__remove:null,__execute:null,_republic:null,object:null,add:function(t){It(Bt,t,"arguments[0] must be an animate civilian.");this.__add(gt(t)._civilian);return this.object},remove:function(t){It(Bt,t,"arguments[0] must be an animate civilian.");this.__remove(gt(t)._civilian);return this.object},execute:function(){this.__execute();return this.object},__proto__:null});function zt(t){if(!I(this))return new zt(t);It(Vt,t,"arguments[0] must be an animate.");St(zt,this);var e=new Ot(this,t);Rt(this,vt,e,"add");Rt(this,_t,e,"remove");Rt(this,pt,e,"execute")}Ct(zt,function(t){var e=q(t);return t}(p(h)));Q._kAni_AnimateRepublic=U.AnimateRepublic=zt;zt.toString=S;zt.user_manuals=["constructor AnimateRepublic(Animate animate);"];function Gt(t){wt(t,this);this.object=t;var e=this._civilian=new C;this.__enter=e.enter;this.__leave=e.leave;this.__request=e.request;this.__unrequest=e.unrequest}Gt.prototype=p({__enter:null,__leave:null,__request:null,__unrequest:null,_civilian:null,object:null,enter:function(t){It(zt,t,"arguments[0] must be an animate republic.");this.__enter(gt(t)._republic);return this.object},leave:function(t){It(zt,t,"arguments[0] must be an animate republic.");this.__leave(gt(t)._republic);return this.object},request:function(){this.__request();return this.object},unrequest:function(){this.__unrequest();return this.object},__proto__:null});function Bt(){if(!I(this))return new Bt;St(Bt,this);var t=new Gt(this);Rt(this,vt,t,"enter");Rt(this,_t,t,"leave");Rt(this,nt,t,"request");Rt(this,at,t,"unrequest")}Ct(Bt,function(t){var e=q(t);e("enter",null);e("leave",null);e("request",null);e("unrequest",null);e(vt,null);e(_t,null);e(nt,null);e(at,null);return t}(p(h)));Q._kAni_AnimateCivilian=U.AnimateCivilian=Bt;Bt.toString=S;Bt.user_manuals=["constructor AnimateCivilian();"];function Kt(t){if(!I(this))return new Kt(t);if(!T(t))throw new TypeError("arguments[0] is not a valid handler.");t=t.bind(this);Pt(this,[tt,"createAnimate"],function e(r,n){return new Vt(function(e){t(r,n,e,this)})})}Ct(Kt,function(t){var e=q(t);e("createAnimate",null);e(tt,null);return t}(p(h)));Q._kAni_VectorAnimator=U.VectorAnimator=Kt;Kt.toString=S;Kt.user_manuals=["constructor VectorAnimator(function<void, VectorAnimator, LVec, RVec, AnimateParam, Animate> vecadder);","typedef any LVec, RVec;"];var Qt=null;function Ut(){return Qt||this}Ut.prototype=dt;Ut.toString=S;Ut.user_manuals=["constructor Initor::SymbolCollection();"];Ut[st]=Ut.created=Qt=new Ut;k(Ut);var Xt=null;function Yt(){return Xt||this}Yt.prototype=ft;Yt.toString=S;Yt.user_manuals=["constructor Initor::FunctionCollection();"];Yt[st]=Yt.created=Xt=new Yt;k(Yt);var Zt=new u;function $t(t){if(!I(t))throw new TypeError("arguments[0] must be extensible.");if(Zt.has(t))return this;Zt.add(t);M(t,Q);E(Q);j(Q);R(t,"_kAni_primitivePrototype",h);return this}$t.toString=S;$t.user_manuals=["constructor Initor::ReleaseClasses(Object object);"];U._primitive_prototype=U[ct]=h;var te=null;function ee(){return te||this}ee.prototype=k(U);ee.toString=S;ee.user_manuals=["constructor Initor::ClassCollection();"];ee[st]=ee.created=te=k(new ee);k(ee);var re=null;function ne(){if(re)return re;var t=q(this);t("SymbolCollection",Ut);t(it,Ut);t("FunctionCollection",Yt);t(ut,Yt);$t(this);t("ReleaseClasses",$t);t(ot,$t);t("ClassCollection",ee);t(lt,ee);return re=this}e[c]=ne;ne.toString=S;ne.user_manuals=["constructor Initor();"];ne.prototype=p(h);ne[st]=ne.created=re=k(new ne);k(ne)})(window,Object,Function,Symbol,Map,Set);