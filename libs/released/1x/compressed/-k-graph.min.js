(function r(e,t,a,n,o,i,l,u,v,c){"use strict";var s;var _=e.document.currentScript;var f=e[_.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor"];if(!f)throw new Error("-k-js-abstract.js is required.");var g=_.getAttributeNS(null,"kgraphlib-keyword")||"_kGraph_Initor";var d=new f;var p=d.SymbolCollection();var m=d.FunctionCollection();var h=t.create;var b=t.defineProperty;var E=t.getPrototypeOf;var S=d.ClassCollection();var w=h(S._primitive_prototype);var y=h(w);d.ReleaseMethods(w);d.ReleaseMethods(y);var P=a.prototype;var T=P.call;var C=P.bind;var L=C.bind(T);var U=C.bind(C);var k=T.bind(T);var I=m.shared_toString;var A=m.is_extensible_object;var N=m.is_valid_handler;var R=t.freeze;var O=y._kJs_setConst;var G=C.bind(O);var B=m.__setConst;var V=m.__addSetConsts;var F=m.__executePropertyMappers;var j=m.__clearAllPropertyMappers;var D=o.prototype;var x=i.prototype;var M=l.prototype;var Y=u.prototype;var H=v.prototype;var z=c.prototype;var W=D.get;var J=D.set;var q=x.add;var K=x.delete;var X=x.has;var Z=x.forEach;var Q=L(Z);var $=M.forEach;var rr=L($);var er=Y.createProgram;var tr=U(er);var ar=Y.createShader;var nr=U(ar);var or=Y.createBuffer;var ir=U(or);var lr=Y.linkProgram;var ur=U(lr);var vr=Y.useProgram;var cr=U(vr);var sr=Y.getShaderSource;var _r=U(sr);var fr=Y.shaderSource;var gr=U(fr);var dr=Y.compileShader;var pr=U(dr);var mr=Y.attachShader;var hr=U(mr);var br=Y.detachShader;var Er=U(br);var Sr=Y.getAttribLocation;var wr=U(Sr);var yr=Y.getUniformLocation;var Pr=U(yr);var Tr=Y.getUniform;var Cr=U(Tr);var Lr=Y.getParameter;var Ur=U(Lr);var kr=Y.getProgramParameter;var Ir=U(kr);var Ar=Y.getProgramInfoLog;var Nr=U(Ar);var Rr=Y.getShaderParameter;var Or=U(Rr);var Gr=Y.getShaderInfoLog;var Br=U(Gr);var Vr=Y.deleteProgram;var Fr=U(Vr);var jr=Y.deleteShader;var Dr=U(jr);var xr=Y.deleteBuffer;var Mr=U(xr);var Yr=Y.enableVertexAttribArray;var Hr=U(Yr);var zr=Y.vertexAttribPointer;var Wr=U(zr);var Jr=Y.uniform1f;var qr=U(Jr);var Kr=Y.uniform2f;var Xr=U(Kr);var Zr=Y.uniform3f;var Qr=U(Zr);var $r=Y.uniform4f;var re=U($r);var ee=Y.uniform1i;var te=U(ee);var ae=Y.uniform2i;var ne=U(ae);var oe=Y.uniform3i;var ie=U(oe);var le=Y.uniform4i;var ue=U(le);var ve=Y.uniform1fv;var ce=U(ve);var se=Y.uniform2fv;var _e=U(se);var fe=Y.uniform3fv;var ge=U(fe);var de=Y.uniform4fv;var pe=U(de);var me=Y.uniform1iv;var he=U(me);var be=Y.uniform2iv;var Ee=U(be);var Se=Y.uniform3iv;var we=U(Se);var ye=Y.uniform4iv;var Pe=U(ye);var Te=Y.uniformMatrix2fv;var Ce=U(Te);var Le=Y.uniformMatrix3fv;var Ue=U(Le);var ke=Y.uniformMatrix4fv;var Ie=U(ke);var Ae=Y.bindBuffer;var Ne=U(Ae);var Re=Y.bufferData;var Oe=U(Re);var Ge=Y.bufferSubData;var Be=U(Ge);var Ve=Y.getBufferParameter;var Fe=U(Ve);var je=Y.isBuffer;var De=U(je);var xe=y._kJs_addSetConsts;var Me=y._kJs_executePropertyMappers;var Ye=y._kJs_clearAllPropertyMappers;var He=h(null);var ze=h(null);var We=h(w);var Je=Y.LINK_STATUS;var qe=Y.COMPILE_STATUS;var Ke=Y.SHADER_TYPE;var Xe=Y.FRAGMENT_SHADER;var Ze=Y.VERTEX_SHADER;var Qe=Y.BUFFER_SIZE;var $e=Y.BUFFER_USAGE;var rt=Y.ARRAY_BUFFER;var et=Y.ELEMENT_ARRAY_BUFFER;var tt=Y.BOOL;var at=Y.BYTE;var nt=Y.SHORT;var ot=Y.INT;var it=Y.UNSIGNED_BYTE;var lt=Y.UNSIGNED_SHORT;var ut=Y.UNSIGNED_INT;var vt=Y.FLOAT;var ct=Y.BOOL_VEC2;var st=Y.BYTE_VEC2;var _t=Y.SHORT_VEC2;var ft=Y.INT_VEC2;var gt=Y.UNSIGNED_BYTE_VEC2;var dt=Y.UNSIGNED_SHORT_VEC2;var pt=Y.UNSIGNED_INT_VEC2;var mt=Y.FLOAT_VEC2;var ht=Y.BOOL_VEC3;var bt=Y.BYTE_VEC3;var Et=Y.SHORT_VEC3;var St=Y.INT_VEC3;var wt=Y.UNSIGNED_BYTE_VEC3;var yt=Y.UNSIGNED_SHORT_VEC3;var Pt=Y.UNSIGNED_INT_VEC3;var Tt=Y.FLOAT_VEC3;var Ct=Y.BOOL_VEC4;var Lt=Y.BYTE_VEC4;var Ut=Y.SHORT_VEC4;var kt=Y.INT_VEC4;var It=Y.UNSIGNED_BYTE_VEC4;var At=Y.UNSIGNED_SHORT_VEC4;var Nt=Y.UNSIGNED_INT_VEC4;var Rt=Y.FLOAT_VEC4;var Ot=Y.FLOAT_MAT2;var Gt=Y.FLOAT_MAT3;var Bt=Y.FLOAT_MAT4;var Vt=p.create;var Ft=p.SymbolCollection;var jt=p.FunctionCollection;var Dt=p.ReleaseClasses;var xt=p.ClassCollection;var Mt=p.createdInstance;var Yt=p.primitivePrototype;var Ht=n("Based object");var zt=n("Context's based object");var Wt=n("Context");var Jt=n("Get parameter");var qt=n("Get info log");var Kt=n("WebGLObject destructor");var Xt=R({basedObject:Ht,parentBasedObject:zt,parentObject:Wt,getParameter:Jt,getInfoLog:qt,destruct:Kt,__proto__:null});var Zt=R({_prvEnsureConstructor:ia,_prvCheckConstructorInstance:la,__proto__:null});var Qt=new o;var $t=new o;var ra=J.bind(Qt);var ea=W.bind(Qt);var ta=J.bind($t);var aa=W.bind($t);function na(r,e){ra(r,new i);r.prototype=e}function oa(r,e){var t=Qt.get(r);if(t.has(e))throw new TypeError("Can't re-construct object. 'new' operator is required.");t.add(e)}function ia(r,e,t){if(!la(r,e))throw new TypeError(t)}function la(r,e){var t=ea(r);return t&&t.has(e)}var ua=m._DescriptorGetterSetter1os3b;var va=m._setconst1oVs1v;var ca=m._setmtdfromcore2o1s;var sa=m._setmtdfromcore2os;var _a=m._setkeytokey1o2s3b;var fa=m._setkeytokey1o2s3b_inheritable;var ga=m._defgettersetter1o2s;var da=function(r){var e=G(r);e("gl",null);e("glUtil",null);e(zt,null);e(Wt,null);return r}(h(w));var pa={get:function(){return this[qt]()},__proto__:null};var ma=function(r){var e=G(r);e("program",null);b(r,"infoLog",pa);e("createShader",null);e("createShaderUtil",null);e("getAttribLocation",null);e("createAttribUtil",null);e("getUniformLocation",null);e("createUniformUtil",null);e("getParameter",null);e("getInfoLog",null);e("destroy",null);e(Ht,null);e(Jt,null);e(qt,null);e(Kt,null);return r}(h(da));var ha=function(r){var e=G(r);e("shader",null);e("source",null);b(r,"infoLog",pa);b(r,"attachedShaders",{get:function(){return this[zt].getAttachedShaders(this[Ht])},__proto__:null});e("getSource",null);e("setSource",null);e("compile",null);e("attachProgram",null);e("attachProgramUtil",null);e("detachProgram",null);e("detachProgramUtil",null);e("getParameter",null);e("getInfoLog",null);e("destroy",null);r.valueOf=function(r){return this[r===s?"getSource":"setSource"](r)};e(Ht,null);e(Jt,null);e(qt,null);e(Kt,null);return r;function t(r,e){}}(h(da));var ba=function(r){var e=G(r);e("buffer",null);e("target",null);e("size",null);e("usage",null);e("valid",false);e("passData",null);e("passSubData",null);e("getParameter",null);e(Jt,null);return r}(h(da));var Ea=function(r){var e=G(r);e("program",null);e("programUtil",null);return r}(h(da));var Sa=function(r){var e=G(r);e("name",null);e("message",null);e("details",null);e("stack",null);e("toString",t);b(r,"string",{get:t,__proto__:null});function t(){return this.name+":\n"+this.message}return r}(h(da));var wa=function(r){var e=G(r);e("type",null);e("infoLog",null);return r}(h(da));(function(r){var e=G(r);e("_util_base_",da);e("_program_util_",ma);e("_variable_util_",Ea);e("_gl_error_",Sa);e("_gl_error_details_",wa)})(ya);function ya(r){if(!A(this))return new ya(r);if(!(r instanceof u))throw new TypeError("Parameter 'gl' must be a WebGLRenderingContext.");var e=this;var t=G(e);var a=tr(r);var n=nr(r);var o=ir(r);var v=ur(r);var c=cr(r);var _=gr(r);var f=pr(r);var g=hr(r);var d=Er(r);var p=Ne(r);var m=Oe(r);var S=Ur(r);var w=Ir(r);var y=Nr(r);var T=Or(r);var C=Br(r);function L(r,e,a){r.prototype=e;t(a,e)}function U(t){var a=G(t);a("gl",r);a("glUtil",e);a(zt,r);a(Wt,e)}function I(r,e,t){(function a(r){if(r===null||r===s)return t(r);var n;if(r instanceof l){n=rr}else if(E(r)===x){n=Q}else return e(r);n(r,function(r){a(r)})})(r)}function N(r,t){var a=t.oncreated;if(a===s||a===null){return}if(typeof a==="function"){return k(a,e,r)}console.warn("Value of 'descriptor.oncreated' is invalid: ",a);throw new TypeError("Property 'oncreated' of parameter 'descriptor' must be either undefined, null, or a function.")}function O(r,t){var a=t.onerror;if(a===s||a===null){throw r}if(typeof a==="function"){return k(a,e,r)}console.warn("Property 'onerror' of parameter 'descriptor' should be a function or undefined or null.");throw r}function V(e){var t=this;var a=hr(r,e);var n=new F(t,e);function o(e,t,a,n,o,i){var l=this;var u=Hr(r,e);var v=Wr(r,e,t,a,n,o,i);var c=G(l);c("attribLocation",e);c("size",t);c("type",a);c("normalized",n);c("stride",o);c("offset",i);c("active",u);c("set",v);c("createBuffer",function(r){var e=Sr(r);v();return e});c("createBufferUtil",function(r){var e=yr(r);v();return e});c(Ht,e)}var i=o.prototype=function(r){var e=G(r);e("attribLocation",null);e("size",null);e("type",null);e("normalized",null);e("stride",null);e("offset",null);e("active",null);e("set",null);e(Ht,null);return r}(h(n));function l(t,a,n){var o,i;switch(a){case"float":i={1:qr,2:Xr,3:Qr,4:re,__proto__:null};break;case"int":i={1:te,2:ne,3:ie,4:ue,__proto__:null};break;case"fvec":i={1:ce,2:_e,3:ge,4:pe,__proto__:null};break;case"ivec":i={1:he,2:Ee,3:we,4:Pe,__proto__:null};break;case"fmat":i={2:Ce,3:Ue,4:Ie,__proto__:null};break;default:throw new RangeError("Parameter 'type' must be either 'float', 'int', 'fvec', 'ivec' or 'fmat'.")}o=i[n];if(typeof o!=="function")throw new RangeError("Parameter 'length' is invalid: length = "+n);var l=G(this);l("get",Cr(r,e,t));l("set",a=="fmat"?o(r,t,0):o(r,t));l("uniformLocation",t);l(Ht,t)}var u=l.prototype=function(r){var e=G(r);e("get",null);e("set",null);e("uniformLocation",null);e(Ht,null);b(r,"value",{get:function(){return this.get()},set:function(r){this.set(r)},__proto__:null});r.valueOf=function(r){return this[r===s?"get":"set"](r)};return r}(h(n));function v(r){a(r[Ht])}var c=Er(r,e);function _(r){c(r[Ht])}var f=wr(r,e);function g(r,e,t,a,n,i){return new o(f(r),e,t,a,n,i)}var d=Pr(r,e);function p(r,e,t){return new l(d(r),e,t)}var m=Ir(r,e);var E=Nr(r,e);var S=Fr(r,e);var w=G(t);w("program",e);w("attachShader",a);w("attachShaderUtil",v);w("detachShader",c);w("detachShaderUtil",_);w("getAttribLocation",f);w("createAttribUtil",g);w("getUniformLocation",d);w("createUniformUtil",p);w("getParameter",m);w("getInfoLog",E);w("destroy",S);w("_variable_util_",n);w("_attrib_util_",i);w("_uniform_util_",u);w(Ht,e);w(Jt,m);w(qt,E);w(Kt,S)}(function(r){L(V,r,"_program_util_");U(r)})(h(ma));function F(r,e){var t=G(this);t("program",e);t("programUtil",r);t(zt,e);t(Wt,r)}(function(r){L(F,r,"_variable_util_");U(r)})(h(Ea));function j(t){if(!t)return;var a=Or(r,t);var n=Br(r,t);var o=Dr(r,t);var i=a(Ke);var l;switch(i){case Xe:l=D;break;case Ze:l=Y;break;default:throw new TypeError("Invalid shader. SHADER_TYPE: "+String(i))}var u=new l;var v=G(u);var c=pr(r,t);var _=_r(r,t);var f=gr(r,t);function p(r){c();if(a(qe))return;var o=new $(t,n(),_());B(o,"shaderUtil",u);if(r===s||r===null){throw o}if(typeof r==="function"){return k(r,e,o)}console.warn("Parameter 'onerror' should be a function or undefined or null.");throw o}var m=_;function h(r){switch(typeof r){case"string":return f(r);case"object":if(!r)break;var e=r.source;if(typeof e!=="string")throw new TypeError("Property 'source' of parameter 'descriptor' must be a string.");f(e);r.compile&&p(r.onerror);return}throw new TypeError("Parameter 'descriptor' must be either a string or an object.")}function E(r){g(r,t)}function S(r){g(r[Ht],t)}function w(r){d(r,t)}function y(r){d(r[Ht],t)}v("shader",t);b(u,"source",{get:m,set:h,__proto__:null});v("compile",p);v("getSource",m);v("setSource",h);v("attachProgram",E);v("attachProgramUtil",S);v("detachProgram",w);v("detachProgramUtil",y);v("getParameter",a);v("getInfoLog",n);v("destroy",o);v(Ht,t);v(Jt,a);v(qt,n);v(Kt,o);return u}(function(r){L(j,r,"_shader_util_");U(r)})(h(ha));function D(){}var M=function(r){L(D,r,"_fragment_shader_util_");return r}(new j(null));function Y(){}var W=function(r){L(Y,r,"_vertex_shader_util_");return r}(new j(null));function J(e,t){var a=this;var n=G(a);var o=Ne(r,t,e);var i=Oe(r,t);var l=Be(r,t);var u=Fe(r,t);var v=Mr(r,e);n("buffer",e);n("target",t);b(a,"size",{get:Fe(r,t,Qe),__proto__:null});b(a,"usage",{get:Fe(r,t,$e),__proto__:null});b(a,"valid",{get:De(r,e),__proto__:null});n("bind",o);n("passData",i);n("passSubData",l);n("getParameter",u);n("destroy",v);n(Ht,R({0:e,1:t,buffer:e,target:t,__proto__:{toString:function(){return e},valueOf:function(){return t},__proto__:null}}));n(Kt,v)}(function(r){L(J,r,"_buffer_util_");U(r)})(h(ba));function q(r){B(this,"name",r)}(function(r){L(q,r,"_gl_error_");U(r)})(h(Sa));function K(r){B(this,"errorType",r)}(function(r){L(K,r,"_gl_error_details_");U(r)})(h(wa));function X(r,e){var t=G(this);t("details",new Z(r,e));t("message",e);t("stack",(new Error).stack)}(function(r){L(X,r,"_program_linking_error_")})(new q("ProgramLinkingError"));function Z(r,e){var t=G(this);t("program",r);t("infoLog",e)}(function(r){L(Z,r,"_program_linking_error_details_");U(r);var e=G(r);e("program",null);e("infoLog",null)})(new K("ProgramLinkingError"));function $(r,e,t){var a=G(this);a("details",new er(r,e,t));a("message",e);a("stack",(new Error).stack)}(function(r){L($,r,"_shader_compiling_error_")})(new q("ShaderCompilingError"));function er(r,e,t){var a=G(this);a("shader",r);a("infoLog",e);a("source",t)}(function(r){L(er,r,"_shader_compiling_error_details_");U(r);var e=G(r);e("shader",null);e("infoLog",null);e("source",null)})(new K("ShaderCompilingError"));function ar(r){if(r===s||r===null)return a();if(typeof r!=="object")throw new TypeError("Parameter 'descriptor' must be either an object or null or undefined.")}function or(r){if(r instanceof l||r instanceof i)return lr({shader:r,use:r.use,link:r.link,onerror:r.onerror,__proto__:null});var e=a();n("vertexShader",Ze,M,W);n("fragmentShader",Xe,W,M);var t=r.use;if(r.link||t){v(e);w(e,Je)?t&&c(e):O(new X(e,y(e)),r)}N(e,r);return e;function n(t,a,n,o){var i=r[t];var l;if(i===s||i===null)return;switch(typeof i){case"string":l=fr({type:a,source:i,compile:true,__proto__:null});break;case"object":switch(E(i)){case z:l=i;if(T(i,Ke)!==a){console.warn(l," has invalid shader type: ",a);throw new TypeError("Invalid shader type: "+a)}break;case n:console.warn(i," is invalid.");l=i[Ht];break;case o:throw new TypeError("Invalid shader type.");default:l=fr({type:a,compile:true,__proto__:i})}break;default:throw new TypeError("Property '"+t+"' of parameter must be either null, undefined, a string, a WebGLShader, a ShaderUtil, or a descriptor<WebGLShader>")}g(e,l)}}function lr(r){return ar(r)||or(r)}function vr(r){return new V(ar(r)||(E(r)===H?r:or(r)))}function sr(r){if(typeof r!=="object"||!r)throw new TypeError("Parameter 'descriptor' must be an object")}function fr(r){var e=n(r.type);if(!e)throw new TypeError("Creating shader failed because given 'descriptor.type' has wrong value.");var t=r.source;var a=r.compile;if(t){_(e,t);if(a){f(e);T(e,qe)||O(new $(e,C(e),t),r)}}I(r.program,function(r){g(E(r)===H?r:lr(r),e)},P);N(e,r);return e}function dr(r){sr(r);return fr(r)}function mr(r){sr(r);return new j(E(r)===z?r:fr(r))}function br(r,e){if(typeof e!=="object"||!e)throw new TypeError("Parameter 'descriptor' must be an object.");var t=e.bind;var a=e.target;var n=e.data;n===s&&(n=e.size);t&&p(a,r);if(n){var o=e.usage;m(a,n,o)}return a}function Sr(r){var e=o();br(e,r);return e}function yr(r){var e=o();var t=br(e,r);if(t!=rt&&t!=et)throw new TypeError("Property 'target' of parameter 'descriptor' must be either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER");return new J(e,t)}t("gl",r);t("createProgram",lr);t("createProgramUtil",vr);t("createShader",dr);t("createShaderUtil",mr);t("createBuffer",Sr);t("createBufferUtil",yr);t("getParameter",S);t("getProgramParameter",w);t("getProgramInfoLog",y);t("getShaderParameter",T);t("getShaderInfoLog",C);t(Ht,r);t(Vt,vr);t(Jt,S)}na(ya,function(r){var e=G(r);e("gl",null);e("createProgram",null);e("createProgramUtil",null);e("createShader",null);e("createShaderUtil",null);e("getParameter",null);e("getProgramParameter",null);e("getProgramInfoLog",null);e("getShaderParameter",null);e("getShaderInfoLog",null);e("_program_util_",ma);e("_shader_util_",ha);e("_fragment_shader_util_",null);e("_vertex_shader_util_",null);e("_variable_util_",null);e("_buffer_util_",ba);e("_gl_error_",Sa);e("_gl_error_details_",wa);e("_program_linking_error_",null);e("_program_linking_error_details_",null);e("_shader_compiling_error_",null);e("_shader_compiling_error_details_",null);e(Ht,null);e(Vt,null);e(Jt);return r}(h(w)));ze._kGraph_GLUtil=We.GLUtil=ya;ya.toString=I;ya.user_manuals=["constructor GLUtil(WebGLRenderingContext gl);"];var Pa=null;function Ta(){return Pa||this}Ta.prototype=Zt;Ta.toString=I;Ta.user_manuals=["constructor Initor::FunctionCollection();"];Ta[Mt]=Ta.created=Pa=new Ta;R(Ta);var Ca=new i;function La(r){if(!A(r))throw new TypeError("arguments[0] must be extensible.");if(Ca.has(r))return this;Ca.add(r);V(r,ze);F(ze);j(ze);B(r,"_kGraph_primitivePrototype",w);return this}La.toString=I;La.user_manuals=["constructor Initor::ReleaseClasses(Object object);"];We._primitive_prototype=We[Yt]=w;var Ua=null;function ka(){return Ua||this}ka.prototype=R(We);ka.toString=I;ka.user_manuals=["constructor Initor::ClassCollection();"];ka[Mt]=ka.created=Ua=R(new ka);R(ka);var Ia=null;function Aa(){if(Ia)return Ia;var r=G(this);r("FunctionCollection",Ta);r(jt,Ta);La(this);r("ReleaseClasses",La);r(Dt,La);r("ClassCollection",ka);r(xt,ka);return Ia=this}e[g]=Aa;Aa.toString=I;Aa.user_manuals=["constructor Initor();"];Aa.prototype=h(w);Aa[Mt]=Aa.created=Ia=R(new Aa);R(Aa)})(window,Object,Function,Symbol,Map,Set,Array,WebGLRenderingContext,WebGLProgram,WebGLShader);