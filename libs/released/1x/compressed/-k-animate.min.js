!function(t,e,n,r,i,u){"use strict";function o(t,e){Te(t,new u),t.prototype=e}function a(t,e){var n=Se.get(t);if(n.has(e))throw new TypeError("Can't re-construct object. 'new' operator is required.");n.add(e)}function l(t,e,n){if(!s(t,e))throw new TypeError(n)}function s(t,e){var n=ke(t);return n&&n.has(e)}function c(t){function e(n){var r=new _(l,n);t(r),l=n,o=requestAnimationFrame(e)}function n(t){requestAnimationFrame(e),l=t}function r(){return o=requestAnimationFrame(n),s=!1,u}function i(){return cancelAnimationFrame(o),s=!0,u}if(!W(this))return new c(t);if(!J(t))throw new TypeError("arguments[0] is not a valid handler.");var u=this;if(a(c,u),t=t.bind(u),"function"!=typeof t)throw new TypeError("arguments[0].bind() must return a function.");var o,l,s=!0,m={get:function(){return s},set:function(t){(t?i:r)()},__proto__:null};Me(u,[ce,"run"],r),Me(u,[_e,"pause"],i),R(u,"paused",m),R(u,re,m)}function _(t,e){this[oe]=(this[ue]=e)-(this[ie]=t)}function m(t,e,n){function r(r){var i,u=!1;return function(){if(t(n,r))i=u?We:(u=!0,He);else{if(!u)return;u=!1,i=Je}e(n,r,i)}}function u(t){var e=S(t);return e||(e=r(t),I(t)),y(t,e),h}function o(t){return w(t),h}function l(){return C(),h}function s(){return g(function(t){t()}),h}function _(t){var e=S(t)||r(t);return new c(function(t){v=t,e()})}function p(){return k(),h}function d(){return P(),h}function f(){return v}if(!W(this))return new m(t,e,n);if(!J(t))throw new TypeError("arguments[0] is not a valid handler.");if(!J(e))throw new TypeError("arguments[1] is not a valid handler.");var h=this;a(m,h),t=t.bind(h),e=e.bind(h);var v,b=new i,A=new i,y=Y.bind(b),w=Z.bind(b),g=$.bind(b),C=te.bind(b),S=X.bind(A),I=Y.bind(A),T=new c(function(t){v=t,s()}),k=T[ce],P=T[_e];Me(h,[be,"add"],u),Me(h,[Ae,"remove"],o),Me(h,[ye,"clear"],l),Me(h,[we,"update"],s),Me(h,[ae,"createAnimateWith"],_),Me(h,[le,"animate"],T),Me(h,[ce,"run"],p),Me(h,[_e,"pause"],d),Me(h,[se,"getAnimateParam"],f);var q=new Re(T,re);R(h,"paused",q),R(h,re,q)}function p(t,e){Pe(t,this),this.object=t;var n=e[ce],r=e[_e],i=this._republic=new x(function(t){(t?r:n)()});this.__add=i[be],this.__remove=i[Ae],this.__execute=i[we]}function d(t){if(!W(this))return new d(t);l(c,t,"arguments[0] must be an animate."),a(d,this);var e=new p(this,t);Ee(this,be,e,"add"),Ee(this,Ae,e,"remove"),Ee(this,we,e,"execute")}function f(t){Pe(t,this),this.object=t;var e=this._civilian=new V;this.__enter=e.enter,this.__leave=e.leave,this.__request=e.request,this.__unrequest=e.unrequest}function h(){if(!W(this))return new h;a(h,this);var t=new f(this);Ee(this,be,t,"enter"),Ee(this,Ae,t,"leave"),Ee(this,ce,t,"request"),Ee(this,_e,t,"unrequest")}function v(t){if(!W(this))return new v(t);if(!J(t))throw new TypeError("arguments[0] is not a valid handler.");t=t.bind(this),Me(this,[ae,"createAnimate"],function(e,n){return new c(function(r){t(e,n,r,animate)})})}function b(){return Ne||this}function A(){return De||this}function y(t){if(!W(t))throw new TypeError("arguments[0] must be extensible.");return Oe.has(t)?this:(Oe.add(t),G(t,ee),B(ee),K(ee),z(t,"_kAni_primitivePrototype",E),this)}function w(){return ze||this}function g(){if(Ge)return Ge;var t=O(this);return t("SymbolCollection",b),t(me,b),t("FunctionCollection",A),t(pe,A),y(this),t("ReleaseClasses",y),t(de,y),t("ClassCollection",w),t(fe,w),Ge=this}var C=t.document.currentScript,S=t[C.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor"];if(!S)throw new Error("-k-js-abstract.js is required.");var I=C.getAttributeNS(null,"kanilib-keyword")||"_kAni_Initor",T=new S,k=T.SymbolCollection(),P=T.FunctionCollection(),q=e.create,R=e.defineProperty,M=T.ClassCollection(),E=q(M._primitive_prototype),j=q(E);T.ReleaseMethods(E),T.ReleaseMethods(j);var F=n.prototype,L=(F.call,F.bind),x=M.Republic,V=M.Civilian,H=P.shared_toString,W=P.is_extensible_object,J=P.is_valid_handler,N=e.freeze,D=j._kJs_setConst,O=L.bind(D),z=P.__setConst,G=P.__addSetConsts,B=P.__executePropertyMappers,K=P.__clearAllPropertyMappers,Q=(j._kJs_addSetConsts,j._kJs_executePropertyMappers,j._kJs_clearAllPropertyMappers,i.prototype),U=u.prototype,X=Q.get,Y=Q.set,Z=Q["delete"],$=Q.forEach,te=Q.clear,ee=(U.add,U["delete"],Date.now,q(null),q(null)),ne=q(E),re=r("check if paused"),ie=r("last executed timepoint"),ue=r("current timepoint"),oe=r("duration"),ae=r("create an animate"),le=r("one unique animate"),se=r("get animate parameters from animate"),ce=k.request,_e=k.unrequest,me=k.SymbolCollection,pe=k.FunctionCollection,de=k.ReleaseClasses,fe=k.ClassCollection,he=k.createdInstance,ve=k.primitivePrototype,be=k.addMember,Ae=k.removeMember,ye=k.clear,we=k.update,ge=N({isPaused:re,lastTime:ie,currentTime:ue,duration:oe,createAnimate:ae,animate:le,getAnimateParam:se,__proto__:null}),Ce=N({_prvEnsureConstructor:l,_prvCheckConstructorInstance:s,__proto__:null}),Se=new i,Ie=new i,Te=Y.bind(Se),ke=X.bind(Se),Pe=Y.bind(Ie),qe=X.bind(Ie),Re=P._DescriptorGetterSetter1os3b,Me=P._setconst1oVs1v,Ee=(P._setmtdfromcore2o1s,P._setmtdfromcore2os),je=P._setkeytokey1o2s3b,Fe=P._setkeytokey1o2s3b_inheritable,Le=(P._defgettersetter1o2s,C.getAttributeNS(null,"kani-enum-type"));Le&&(Le=Le.toLocaleString());var xe,Ve;switch(Le){case"int":case"integer":case"number":!function(){var t=0,e=0;xe=function(){var e=t;return t+=1<<level,e},Ve=function(n){t=0,e=n>>0}}();break;default:t.console.warn("Attribute 'kani-enum-type' of this script element is set to an invalid value. Enum type will be Symbol by default.",C,C.getAttributeNodeNS(null,"kani-enum-type"));case null:case"symbol":xe=function(t){return r(t)},Ve=F}o(c,function(t){var e=O(t);return e("run",null),e("pause",null),e("paused",!0),e(re,!0),e(ce,null),e(_e,null),t}(q(E))),ee._kAni_Animate=ne.Animate=c,c.toString=H,c.user_manuals=["constructor Animate(function<void, Animate, AnimateParam> callback);"],function(t){var e=t.prototype=q(E);z(c,"prvAnimateParam_prototype",e),Fe(!0),je(e,"now",ue),je(e,"last",ie),je(e,"duration",oe),e[ue]=null,e[ie]=null,e[oe]=0}(_),Ve(0);var He=xe("Stage.FIRST_IMPACT"),We=xe("Stage.WHILE_IMPACT"),Je=xe("Stage.AFTER_IMPACT");!function(t){var e=O(t);e("FIRST_IMPACT",He),e("WHILE_IMPACT",We),e("AFTER_IMPACT",Je)}(m),o(m,function(t){var e=O(t);return e("add",null),e("remove",null),e("clear",null),e("update",null),e("createAnimateWith",null),e("animate",null),e("run",null),e("pause",null),e("getAnimateParam",null),e("paused",null),e(be,null),e(Ae,null),e(ye,null),e(we,null),e(ae,null),e(le,null),e(ce,null),e(_e,null),e(se,null),e(re,null),e("FIRST_IMPACT",He),e("WHILE_IMPACT",We),e("AFTER_IMPACT",Je),t}(q(E))),ee._kAni_Stage=ne.Stage=m,m.toString=H,m.user_manuals=["constructor Stage(ImpactDetector impact_detector, ImpactHandler impact_handler, LActor l_actor);","typedef function<bool, Stage, LActor, RActor> ImpactDetector;","typedef function<void, Stage, LActor, RActor, ImpactType> ImpactHandler;","typedef any LActor, RActor;","enum ImpactType { FIRST_IMPACT, WHILE_IMPACT, AFTER_IMPACT }"],p.prototype=q({__add:null,__remove:null,__execute:null,_republic:null,object:null,add:function(t){return l(h,t,"arguments[0] must be an animate civilian."),this.__add(qe(t)._civilian),this.object},remove:function(t){return l(h,t,"arguments[0] must be an animate civilian."),this.__remove(qe(t)._civilian),this.object},execute:function(){return this.__execute(),this.object},__proto__:null}),o(d,function(t){O(t);return t}(q(E))),ee._kAni_AnimateRepublic=ne.AnimateRepublic=d,d.toString=H,d.user_manuals=["constructor AnimateRepublic(Animate animate);"],f.prototype=q({__enter:null,__leave:null,__request:null,__unrequest:null,_civilian:null,object:null,enter:function(t){return l(d,t,"arguments[0] must be an animate republic."),this.__enter(qe(t)._republic),this.object},leave:function(t){return l(d,t,"arguments[0] must be an animate republic."),this.__leave(qe(t)._republic),this.object},request:function(){return this.__request(),this.object},unrequest:function(){return this.__unrequest(),this.object},__proto__:null}),o(h,function(t){var e=O(t);return e("enter",null),e("leave",null),e("request",null),e("unrequest",null),e(be,null),e(Ae,null),e(ce,null),e(_e,null),t}(q(E))),ee._kAni_AnimateCivilian=ne.AnimateCivilian=h,h.toString=H,h.user_manuals=["constructor AnimateCivilian();"],o(v,function(t){var e=O(t);return e("createAnimate",null),e(ae,null),t}(q(E))),ee._kAni_VectorAnimator=ne.VectorAnimator=v,v.toString=H,v.user_manuals=["constructor VectorAnimator(function<void, VectorAnimator, LVec, RVec, AnimateParam, Animate> vecadder);","typedef any LVec, RVec;"];var Ne=null;b.prototype=ge,b.toString=H,b.user_manuals=["constructor Initor::SymbolCollection();"],b[he]=b.created=Ne=new b,N(b);var De=null;A.prototype=Ce,A.toString=H,A.user_manuals=["constructor Initor::FunctionCollection();"],A[he]=A.created=De=new A,N(A);var Oe=new u;y.toString=H,y.user_manuals=["constructor Initor::ReleaseClasses(Object object);"],ne._primitive_prototype=ne[ve]=E;var ze=null;w.prototype=N(ne),w.toString=H,w.user_manuals=["constructor Initor::ClassCollection();"],w[he]=w.created=ze=N(new w),N(w);var Ge=null;t[I]=g,g.toString=H,g.user_manuals=["constructor Initor();"],g.prototype=q(E),g[he]=g.created=Ge=N(new g),N(g)}(window,Object,Function,Symbol,Map,Set);