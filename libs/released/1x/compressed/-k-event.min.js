(function e(r,t,n,a,o,u){"use strict";var i;var l=r.document.currentScript;var v=r[l.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor"];if(!v)throw new Error("-k-js-abstract.js is required.");var s=l.getAttributeNS(null,"keventlib-keyword")||"_kEvent_Initor";var c=new v;var d=c.SymbolCollection();var f=c.FunctionCollection();var p=t.create;var _=t.defineProperty;var b=c.ClassCollection();var y=p(b._primitive_prototype);var w=p(y);c.ReleaseMethods(y);c.ReleaseMethods(w);var h=n.prototype;var m=h.call;var C=h.bind;var E=C.bind(m);var g=b.Republic;var k=b.Civilian;var q=f.shared_toString;var S=f.is_extensible_object;var R=f.is_valid_handler;var M=t.freeze;var j=w._kJs_setConst;var T=C.bind(j);var I=f.__setConst;var P=f.__addSetConsts;var F=f.__executePropertyMappers;var H=f.__clearAllPropertyMappers;var J=w._kJs_addSetConsts;var L=w._kJs_executePropertyMappers;var X=w._kJs_clearAllPropertyMappers;var x=a.prototype;var A=o.prototype;var N=u.prototype;var O=x.get;var z=x.set;var D=x.delete;var G=x.forEach;var V=x.clear;var B=A.add;var K=A.delete;var Q=A.has;var U=N.open;var W=N.send;var Y=E(U);var Z=E(W);var $=p(null);var ee=p(null);var re=p(y);var te=d.create;var ne=d.addMember;var ae=d.removeMember;var oe=d.update;var ue=d.request;var ie=d.unrequest;var le=d.enable;var ve=d.disable;var se=d.enabled;var ce=d.SymbolCollection;var de=d.FunctionCollection;var fe=d.ReleaseClasses;var pe=d.ClassCollection;var _e=d.createdInstance;var be=d.primitivePrototype;var ne=d.addMember;var ae=d.removeMember;var ye=M({is_valid_event_target:Je,_prvEnsureConstructor:Se,_prvCheckConstructorInstance:Re,__proto__:null});var we=new a;var he=new a;var me=z.bind(we);var Ce=O.bind(we);var Ee=z.bind(he);var ge=O.bind(he);function ke(e,r){me(e,new o);e.prototype=r}function qe(e,r){var t=we.get(e);if(t.has(r))throw new TypeError("Can't re-construct object. 'new' operator is required.");t.add(r)}function Se(e,r,t){if(!Re(e,r))throw new TypeError(t)}function Re(e,r){var t=Ce(e);return t&&t.has(r)}var Me=f._DescriptorGetterSetter1os3b;var je=f._setconst1oVs1v;var Te=f._setmtdfromcore2o1s;var Ie=f._setmtdfromcore2os;var Pe=f._setkeytokey1o2s3b;var Fe=f._setkeytokey1o2s3b_inheritable;var He=f._defgettersetter1o2s;function Je(e){return typeof e.addEventListener==="function"&&typeof e.removeEventListener==="function"}function Le(e,r){var t=T(this);t("type",e);t("event",r)}var Xe=Le.prototype=function(e){var r=T(e);r("type",null);r("event",null);return e}(p(y));I(Ae,"_event_preventor_param_",Xe);var xe=function(e){var r=T(e);r("enable",null);r("disable",null);r("enabled",null);r(le,null);r(ve,null);r(se,null);return e}(p(y));I(Ae,"_event_civilian_",xe);function Ae(e){if(!S(this))return new Ae(e);if(!R(e))throw new TypeError("arguments[0] is not a valid handler.");var r=this;qe(Ae,r);var t=new g(e.bind(r));var n=t[ne];var a=t[ae];var u=t[oe];var i=new o;var l=Q.bind(i);var v=B.bind(i);function s(e,r){if(!Je(e))throw new TypeError("arguments[0] is not a valid event target.");if(typeof r!=="object"||!r)throw new TypeError("arguments[1] must be an object.");var t=r.requestonly;if(typeof t!=="boolean")throw new TypeError("arguments[1].requestonly must be a boolean.");var o=this;var i=r.preventor;switch(typeof i){case"function":i=C.call(i,o);break;case"object":if(!i){i=h;break}if(!R(i))throw new TypeError("arguments[1].preventor must be either undefined, null, a function, or a functor.");i=i.bind(o);break;case"undefined":i=h;break;default:throw new TypeError("arguments[1].preventor must be either undefined, null, a function, or a functor.")}function l(e,r){return i(new Le(e,r))}v(o);var s=new k;var c=false;var d=e.addEventListener.bind(e);var f=e.removeEventListener.bind(e);var p,b;var y=r.request_event_type;var w=r.request_use_capture;var m=s[ue];function E(e){if(l("request",e))return;m();u()}if(t){p=function(){c=true;n(s);d(y,E,w);return o};b=function(){c=false;a(s);f(y,E,w);return o}}else{(function(){var e=r.unrequest_event_type;var t=r.unrequest_use_capture;var i=s[ie];function v(e){if(l("unrequest",e))return;i();u()}p=function(){c=true;n(s);d(y,E,w);d(e,v,t);return o};b=function(){c=false;a(s);f(y,E,w);f(e,v,t);return o}})()}var g={get:function(){return c},set:function(e){(e?p:b)()},__proto__:null};je(o,[le,"enable"],p);je(o,[ve,"disable"],b);_(o,"enabled",g);_(o,se,g)}var c=s.prototype=p(xe);I(s,"_event_preventor_param_",Xe);function d(e,r){return new s(e,r)}function f(e){w(e);e[le]();return r}function b(e){w(e);e[ve]();return r}function y(e){w(e);return e[se]}function w(e){if(!l(e))throw new TypeError("arguments[0] is not a valid event republic.")}je(r,[te,"create"],d);je(r,[le,"enable"],f);je(r,[ve,"disable"],b);je(r,[se,"isEnabled"],y)}ke(Ae,function(e){var r=T(e);r("create",null);r("enable",null);r("disable",null);r("isEnabled",null);r(te,null);r(le,null);r(ve,null);r(se,null);return e}(p(y)));ee._kEvent_EventRepublic=re.EventRepublic=Ae;Ae.toString=q;Ae.user_manuals=["constructor EventRepublic(function<void, EventRepublic, uint> handler);"];function Ne(e){if(!S(this))return new Ne(e);if(!R(e))throw new TypeError("arguments[0] is not a valid handler.");var r=this;var t=new Ae(e.bind(r));var n=t.create;var o=new a;var i=O.bind(o);var l=z.bind(o);function v(e){var r=i(e);if(!r){r=n(e,{requestonly:true,request_event_type:"loadend",request_use_capture:false,__proto__:null});l(e,r)}r.enable()}function s(e){var r=i(e);if(!r)return;r.disable()}var c=t[le];var d=t[ve];function f(e){v(e);return r}function p(e){s(e);return r}function b(e,r,t){var n=new u;v(n);(function(){if(!e)return;Y(n,e,r);if(t)Z(n)})();return n}function y(){c();return r}function w(){d();return r}je(r,[ne,"add"],f);je(r,[ae,"remove"],p);je(r,[te,"create"],b);je(r,[le,"enable"],y);je(r,[ve,"disable"],w);var h=new Me(t,se);_(r,"enabled",h);_(r,se,h)}ke(Ne,function(e){var r=T(e);r("add",null);r("remove",null);r("create",null);r("enable",null);r("disable",null);r(ne,null);r(ae,null);r(te,null);r(le,null);r(ve,null);return e}(p(y)));ee._kEvent_XHRCount=re.XHRCount=Ne;Ne.toString=q;Ne.user_manuals=["constructor XHRCount(function<void, XHRCount, uint> handler);"];var Oe=null;function ze(){return Oe||this}ze.prototype=ye;ze.toString=q;ze.user_manuals=["constructor Initor::FunctionCollection();"];ze[_e]=ze.created=Oe=new ze;M(ze);var De=new o;function Ge(e){if(!S(e))throw new TypeError("arguments[0] must be extensible.");if(De.has(e))return this;De.add(e);P(e,ee);F(ee);H(ee);I(e,"_kEvent_primitivePrototype",y);return this}Ge.toString=q;Ge.user_manuals=["constructor Initor::ReleaseClasses(Object object);"];re._primitive_prototype=re[be]=y;var Ve=null;function Be(){return Ve||this}Be.prototype=M(re);Be.toString=q;Be.user_manuals=["constructor Initor::ClassCollection();"];Be[_e]=Be.created=Ve=M(new Be);M(Be);var Ke=null;function Qe(){if(Ke)return Ke;var e=T(this);e("FunctionCollection",ze);e(de,ze);Ge(this);e("ReleaseClasses",Ge);e(fe,Ge);e("ClassCollection",Be);e(pe,Be);return Ke=this}r[s]=Qe;Qe.toString=q;Qe.user_manuals=["constructor Initor();"];Qe.prototype=p(y);Qe[_e]=Qe.created=Ke=M(new Qe);M(Qe)})(window,Object,Function,Map,Set,XMLHttpRequest);