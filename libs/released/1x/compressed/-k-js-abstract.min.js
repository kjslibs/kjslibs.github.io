!function(e,t,n,r,o,i,s){"use strict";function a(){return tt(this)}function l(e){nt(this,e)}function u(e,t){Ot(e,new s),e.prototype=t}function c(e,t){var n=Rt.get(e);if(n.has(t))throw new TypeError("Can't re-construct object. 'new' operator is required.");n.add(t)}function p(e,t,n){if(!d(e,t))throw new TypeError(n)}function d(e,t){var n=Tt(e);return n&&n.has(t)}function _(e,t,n,r,o){if(!this)return new _(e,t,n,r,o);var i=xt(this);i("get",function(){return e[t]}),n||i("set",function(n){e[t]=n}),i("enumerable",Boolean(r)),i("configurable",Boolean(o))}function h(e,t,n){var r=xt(e);Pt(t,function(e){r(e,n)})}function f(e,t){return e[t].bind(e)}function y(e,t,n){jt(e,n,f(t,n))}function b(e,t,n,r){var o=xt(e),i=f(n,r);o(t,i),o(r,i)}function m(e,t,n,r,o,i,s){G(e,t,new _(n,r,o,i,s))}function v(e,t,n,r,o,i){G(e,t,{set:r?X:It?w(n):P(e,n),get:It?C(n):j(e,n),enumerable:Boolean(o),configurable:Boolean(i),__proto__:null})}function g(e,t,n,r,o){G(e,t,{configurable:Boolean(o),enumerable:Boolean(r),get:function(){return this[n]},set:function(e){this[n]=e},__proto__:null})}function w(e){return function(t){return this[e]=t}}function C(e){return function(){return this[e]}}function P(e,t){return function(n){return e[t]=n}}function j(e,t){return function(){return e[t]}}function S(){return this.user_manuals.join("\n	")}function E(e){return e&&"object"==typeof e&&K(e)}function M(e){switch(e){case X:case null:return!1}return"function"==typeof e.call&&"function"==typeof e.apply&&"function"==typeof e.bind?!0:void 0}function k(e,t,n){return(n||(n=st)).value=t,G(this,e,n),this}function x(e,t,n){if(!E(this)&&"function"!=typeof this)throw new TypeError("Object must be extensible.");var r=this;return Et(e,function(e){var n=e[un];jt(r,n,this[n],t)},n)}function R(e,t){if(!E(this)&&"function"!=typeof this)throw new TypeError("Object must be extensible.");var n=this;return Et(e,function(t){var r=t[un];G(n,r,et(e,r))},t)}function D(e,t){var n=hn.get(this);return n?n.some(function(n,r,o){return t===e?(o.splice(r,0,e),!0):!1})||n.push(e):hn.set(this,[e]),this}function O(e){var t=hn.get(this);return t&&t.splice(t.indexOf(e),1),this}function T(){var e=hn.get(this);return e&&(e.length=0),this}function q(e){function t(t){return o[un]=t,r.some(n,e),o[cn]>0&&(--o[-key_jump],!0)}function n(e){return e.call(this,o),o[cn]>0&&(--o[cn],!0)}var r=hn.get(this),o=new J(e,this);return Bt=o,r&&(e||(e=this),$(this).some(t)||Z(this).some(t))?this:this}function J(e,t){this[an]=e,this[ln]=t}function I(e,t){this.object=e,this.handler=t;var n=this.unrequested=new s;this.__add=mt.bind(n),this.__delete=vt.bind(n),qt(e,this)}function B(e){if(!E(this))return new B(e);if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");if(e=e.bind(this),"function"!=typeof e)throw new TypeError("handler.bind() must return a function.");c(B,this);var t=new I(this,e);b(this,Kt,t,"add"),b(this,Zt,t,"remove"),b(this,en,t,"execute")}function A(e){this.object=e,this.__forEach=gt.bind(this.entered=new s),qt(e,this)}function N(){if(!E(this))return new N;c(N,this);var e=new A(this);b(this,Kt,e,"enter"),b(this,Zt,e,"leave"),b(this,tn,e,"request"),b(this,nn,e,"unrequest"),b(this,en,e,"update")}function F(){return fn||this}function H(){return yn||this}function L(e){if(!E(e))throw new TypeError("arguments[0] must be extensible.");return bn.has(e)?this:(bn.add(e),St(e,rt),Mt(rt),kt(rt),this)}function U(e){if(!E(e))throw new TypeError("arguments[0] must be extensible.");return mn.has(e)?this:(mn.add(e),St(e,ot),Mt(ot),kt(ot),jt(e,"_kJs_primitivePrototype",Y),jt(e,Xt,Y),this)}function W(){return vn||this}function z(){if(gn)return gn;var e=xt(this);return e("SymbolCollection",F),e(Nt,F),e("FunctionCollection",H),e(Ft,H),L(this),e("ReleaseMethods",L),e(Ht,L),U(this),e("ReleaseClasses",U),e(Lt,U),e("ClassCollection",W),e(Ut,W),gn=this}var X,Q=t.create,Y=Q(null),G=t.defineProperty,V=(t.defineProperties,t.freeze),K=(t.seal,t.preventExtensions,t.isFrozen,t.isSealed,t.isExtensible),Z=t.getOwnPropertyNames,$=t.getOwnPropertySymbols,et=t.getOwnPropertyDescriptor,tt=t.getPrototypeOf,nt=t.setPrototypeOf,rt=(r.iterator,Math.ceil,Math.max,Math.min,Q(null)),ot=Q(null),it=Q(Y),st={enumerable:!1,writable:!1,configurable:!1,__proto__:Y},at=t.prototype,lt=n.prototype,ut=o.prototype,ct=i.prototype,pt=s.prototype,dt={get:a,set:l,__proto__:null},_t=(at.hasOwnProperty,lt.call),ht=(lt.apply,lt.bind),ft=ut.map,yt=ct.set,bt=ct.get,mt=(ct["delete"],ct.forEach,pt.add),vt=pt["delete"],gt=pt.forEach,wt=ht.bind(ht),Ct=wt(_t),Pt=Ct(ft),jt=Ct(k),St=Ct(x),Et=Ct(D),Mt=Ct(q),kt=Ct(T),xt=wt(k),Rt=new i,Dt=new i,Ot=yt.bind(Rt),Tt=bt.bind(Rt),qt=yt.bind(Dt),Jt=bt.bind(Dt);_.prototype=V({get:null,set:null,readonly:!1,enumerable:!1,configurable:!1,__proto__:null});var It=!1;S.toString=S,S.user_manuals="This method which called 'toString', simply join the value stored in 'object.user_manuals' as an instance of 'Array'";var Bt=null,At=r("Initor"),Nt=r("SymbolCollection"),Ft=r("FunctionCollection"),Ht=r("ReleaseMethods"),Lt=r("ReleaseClasses"),Ut=r("ClassCollection"),Wt=r("created instance"),zt=r("__proto__"),Xt=r("primitive prototype"),Qt=r("create"),Yt=r("setConst"),Gt=r("addSetConsts"),Vt=r("addDefPro"),Kt=r("add member"),Zt=r("remove member"),$t=r("clear all members"),en=r("update and run"),tn=r("request"),nn=r("unrequest"),rn=r("enable"),on=r("disable"),sn=r("check if enabled, set enable/disable"),an=r("arguments"),ln=r("self"),un=r("key as Symbol or String"),cn=r("jump as Integer"),pn=Q(ut);pn.length=0;var dn=V({Initor:At,SymbolCollection:Nt,FunctionCollection:Ft,ReleaseMethods:Ht,ReleaseClasses:Lt,ClassCollection:Ut,createdInstance:Wt,proto:zt,primitivePrototype:Xt,create:Qt,setConst:Yt,addSetConsts:Gt,addDefPro:Vt,addMember:Kt,removeMember:Zt,clear:$t,update:en,request:tn,unrequest:nn,enable:rn,disable:on,enabled:sn,args:an,self:ln,jump:cn,__proto__:null}),_n=V({is_extensible_object:E,is_valid_handler:M,Initor:z,SymbolCollection:F,FunctionCollection:H,ReleaseClasses:U,ReleaseMethods:L,shared_toString:S,_prvEnsureConstructor:p,_prvCheckConstructorInstance:d,_proto_descriptor:(dt.set(null),V(dt)),_proto_getter:a,_proto_setter:l,_DescriptorGetterSetter1os3b:_,_setconst1oVs1v:h,_bindmtdbyname:f,_setmtdfromcore2o1s:y,_setmtdfromcore2os:b,_setkeytokey2os3b:m,_setkeytokey1o2s3b:v,_setkeytokey1o2s3b_inheritable:function(e){It=Boolean(e)},_defgettersetter1o2s:g,_setter:w,_getter:C,_setter_of:P,_getter_of:j,__function_callbind:Ct,__setConst:jt,__addSetConsts:St,__insertPropertyMapperBefore:Et,__executePropertyMappers:Mt,__clearAllPropertyMappers:kt,__proto__:null});rt[Yt]=rt._kJs_setConst=k,k.toString=S,k.user_manuals=["void Dictionary::setConst(String name, String value, optional DataPropertyDescriptor descriptor);"],rt[Gt]=rt._kJs_addSetConsts=x,x.toString=S,x.user_manuals=["void Dictionary::addSetConsts(Dictionary clone_target, optional Object descriptor, optional PropertyMapper position)","typedef function<Dictionary, PropertyMapperParam> PropertyMapper;","What this method does is adding a setting-constant handler before position","Call _kJs_insertPropertyMapperBefore.call(clone_target) to apply"],rt[Vt]=rt._kJs_addDefPro=R,R.toString=S,R.user_manuals=["void Dictionary::addDefPro(Dictionary clone_target, optional PropertyMapper position);","typedef function<Dictionary, PropertyMapperParam> PropertyMapper;","copy all own properties from clone_target to the object by getting their property-descriptor","Call _kJs_insertPropertyMapperBefore.call(clone_target) to apply"];var hn=new i;rt._kJs_insertPropertyMapperBefore=D,D.toString=S,D.user_manuals=["void Dictionary::insertPropertyMapperBefore(PropertyMapper handler, optional PropertyMapper position);","typedef function<Dictionary, PropertyMapperParam> PropertyMapper;","When call _kJs_executePropertyMappers, 'handler' will be called before 'position' is called","Handler may skip the rest of executing handler list by assigning arguments[0].jump to 1","Handler may stop the executing process by assigning arguments[0].jump to 2"],rt._kJs_removePropertyMapper=O,O.toString=S,O.user_manuals=["void Dictionary::removePropertyMapper(Handler handler)","removed handler would not execute when call _kJs_executePropertyMappers"],rt._kJs_clearAllPropertyMappers=T,T.toString=S,T.user_manuals=["void Dictionary::clearAllPropertyMappers();","clear all inserted property mappers"],rt._kJs_executePropertyMappers=q,q.toString=S,q.user_manuals=["void Dictionary::executePropertyMappers(optional Object args);","execute all handlers which have been inserted before","Handler may skip the rest of executing handler list by assigning arguments[0].continue to true","Handler may stop the executing process by assigning arguments[0].break to true"],function(e){var t=rt._kJs_prvPropertyMapperParam_prototype=e.prototype=Q(Y);It=!0,v(t,"args",an),v(t,"self",ln),v(t,"property",un),v(t,"jump",cn),t[an]=null,t[ln]=null,t[un]=null,t[cn]=0}(J),I.prototype=Q({__add:null,__delete:null,_add:function(e){this.__add(e)},_remove:function(e){this.__delete(e)},object:null,handler:null,unrequested:null,add:function(e){return p(N,e,"arguments[0] is not an instance of Civilian"),Jt(e)._enter(this),this.object},remove:function(e){return p(N,e,"arguments[0] is not an instance of Civilian"),Jt(e)._leave(this),this.object},execute:function(){return this.handler(this.unrequested.size)},__proto__:null}),u(B,function(e){var t=xt(e);return t("add",null),t("remove",null),t("execute",null),t(Kt,null),t(Zt,null),t(en,null),e}(Q(Y))),ot._kJs_Republic=it.Republic=B,B.toString=S,B.user_manuals=["constructor Republic(function<void, Republic, uint> handler);","void add(Civilian civilian);","void remove(Civilian civilian);","any execute();"],function Pn(e){var t=xt(e);return t("EXECUTE_CASE_ALL_OR_NO",function(e,t){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");if(!M(t))throw new TypeError("arguments[1] is not a valid handler.");return e=e.bind(X),t=t.bind(X),function(n){return(n?t:e)(this)}}),t("EXECUTE_ONLY_WHEN_ALL_REQUESTED",function(e){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");return e=e.bind(X),function(t){return t?X:e(this)}}),t("EXECUTE_ONLY_WHEN_NO_REQUESTED",function(e){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");return e=e.bind(this),function(t){return t?e(this):null}}),Pn}(B)(B.prototype),A.prototype=Q({__forEach:null,_enter:function(e){var t=this.entered;t.has(e)||(e._add(this),t.add(e))},_leave:function(e){var t=this.entered;t.has(e)&&(e._remove(this),t["delete"](e))},entered:null,object:null,enter:function(e){return p(B,e,"arguments[0] is not an instance of Republic"),this._enter(Jt(e)),this.object},leave:function(e){return p(B,e,"arguments[0] is not an instance of Republic"),this._leave(Jt(e)),this.object},request:function(){var e=this;return e.entered.forEach(function(t){t._remove(e)}),e.object},unrequest:function(){var e=this;return e.entered.forEach(function(t){t._add(e)}),e.object},update:function(){return this.__forEach(function(e){e.execute()}),this.object},__proto__:null}),u(N,function(e){var t=xt(e);return t("enter",null),t("leave",null),t("request",null),t("unrequest",null),t("update",null),t(Kt,null),t(Zt,null),t(tn,null),t(nn,null),t(en,null),e}(Q(Y))),ot._kJs_Civilian=it.Civilian=N,N.toString=S,N.user_manuals=["constructor Civilian();","void enter(Republic set);","void leave(Republic set);","void request();","void unrequest();","void update();"];var fn=null;F.prototype=dn,F.toString=S,F.user_manuals=["constructor Initor::SymbolCollection();","Return value: An object which contains all keys"],F[Wt]=F.created=fn=V(new F),V(F);var yn=null;H.prototype=_n,H.toString=S,H.user_manuals=["function Initor::FunctionCollection();","Return value: An object which contains all utility functions"],H.prototype=_n,H[Wt]=H.created=yn=new H,V(H);var bn=new s;L.toString=S,L.user_manuals=["function Initor::ReleaseMethods(Object object);","Implement all methods from -k-js-abstract.js"],G(Y,zt,dt),G(Y,"__proto__",dt);var mn=new s;U.toString=S,U.user_manuals=["function Initor::ReleaseClasses(Object object);","Release all classes from -k-js-abstract.js to object"],it._primitive_prototype=it[Xt]=Y;var vn=null;W.prototype=V(it),W.toString=S,W.user_manuals=["constructor Initor::ClassCollection();","Return a class collection"],W[Wt]=W.created=vn=V(new W),V(W);var gn=null,wn=e.document.currentScript,Cn=wn.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor";e[Cn]=e[At]=z,z.toString=S,z.user_manuals=["constructor Initor();","This constructor is used for create initor of -k-js-abstract.js","Call this constructor once for all"],z.prototype=Q(Y),z[Wt]=z.created=gn=V(new z),V(z),L(Y)}(window,Object,Function,Symbol,Array,Map,Set);