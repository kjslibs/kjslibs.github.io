!function(e,t,n,r,o,i,s){"use strict";function a(){return $(this)}function l(e){et(this,e)}function u(e,t){xt(e,new s),e.prototype=t}function c(e,t){var n=Ot.get(e);if(n.has(t))throw new TypeError("Can't re-construct object. 'new' operator is required.");n.add(t)}function p(e,t,n){if(!h(e,t))throw new TypeError(n)}function h(e,t){var n=Rt(e);return n&&n.has(t)}function d(e,t,n,r,o){if(!this)return new d(e,t,n,r,o);var i=Mt(this);i("get",function(){return e[t]}),n||i("set",function(n){e[t]=n}),i("enumerable",Boolean(r)),i("configurable",Boolean(o))}function _(e,t,n){var r=Mt(e);wt(t,function(e){r(e,n)})}function f(e,t){return e[t].bind(e)}function b(e,t,n){Ct(e,n,f(t,n))}function m(e,t,n,r){var o=Mt(e),i=f(n,r);o(t,i),o(r,i)}function y(e,t,n,r,o,i,s){Y(e,t,new d(n,r,o,i,s))}function v(e,t,n,r,o,i){Y(e,t,{set:r?z:It?w(n):j(e,n),get:It?C(n):S(e,n),enumerable:Boolean(o),configurable:Boolean(i),__proto__:null})}function g(e,t,n,r,o){Y(e,t,{configurable:Boolean(o),enumerable:Boolean(r),get:function(){return this[n]},set:function(e){this[n]=e},__proto__:null})}function w(e){return function(t){return this[e]=t}}function C(e){return function(){return this[e]}}function j(e,t){return function(n){return e[t]=n}}function S(e,t){return function(){return e[t]}}function E(){return this.user_manuals.join("\n	")}function k(e){return e&&"object"==typeof e&&V(e)}function M(e){switch(e){case z:case null:return!1}return"function"==typeof e.call&&"function"==typeof e.apply&&"function"==typeof e.bind?!0:void 0}function O(e,t,n){return(n||(n=ot)).value=t,Y(this,e,n),this}function P(e,t,n){if(!k(this)&&"function"!=typeof this)throw new TypeError("Object must be extensible.");var r=this;return St(e,function(e){var n=e[sn];Ct(r,n,this[n],t)},n)}function x(e,t){var n=pn.get(this);return n?n.some(function(n,r,o){return t===e?(o.splice(r,0,e),!0):!1})||n.push(e):pn.set(this,[e]),this}function R(e){var t=pn.get(this);return t&&t.splice(t.indexOf(e),1),this}function T(){var e=pn.get(this);return e&&(e.length=0),this}function q(e){function t(t){return o[sn]=t,r.some(n,e),o[an]>0&&(--o[-key_jump],!0)}function n(e){return e.call(this,o),o[an]>0&&(--o[an],!0)}var r=pn.get(this),o=new I(e,this);return Jt=o,r&&(e||(e=this),Z(this).some(t)||K(this).some(t))?this:this}function I(e,t){this[rn]=e,this[on]=t}function J(e,t){this.object=e,this.handler=t;var n=this.unrequested=new s;this.__add=bt.bind(n),this.__delete=mt.bind(n),Tt(e,this)}function A(e){if(!k(this))return new A(e);if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");if(e=e.bind(this),"function"!=typeof e)throw new TypeError("handler.bind() must return a function.");c(A,this);var t=new J(this,e);m(this,Yt,t,"add"),m(this,Gt,t,"remove"),m(this,Kt,t,"execute")}function B(e){this.object=e,this.__forEach=yt.bind(this.entered=new s),Tt(e,this)}function H(){if(!k(this))return new H;c(H,this);var e=new B(this);m(this,Yt,e,"enter"),m(this,Gt,e,"leave"),m(this,Zt,e,"request"),m(this,$t,e,"unrequest"),m(this,Kt,e,"update")}function N(){return hn||this}function F(){return dn||this}function L(e){if(!k(e))throw new TypeError("arguments[0] must be extensible.");return _n.has(e)?this:(_n.add(e),jt(e,tt),Et(tt),kt(tt),this)}function U(e){if(!k(e))throw new TypeError("arguments[0] must be extensible.");return fn.has(e)?this:(fn.add(e),jt(e,nt),Et(nt),kt(nt),Ct(e,"_kJs_primitivePrototype",Q),Ct(e,Wt,Q),this)}function D(){return bn||this}function W(){if(mn)return mn;var e=Mt(this);return e("SymbolCollection",N),e(Bt,N),e("FunctionCollection",F),e(Ht,F),L(this),e("ReleaseMethods",L),e(Nt,L),U(this),e("ReleaseClasses",U),e(Ft,U),e("ClassCollection",D),e(Lt,D),mn=this}var z,X=t.create,Q=X(null),Y=t.defineProperty,G=(t.defineProperties,t.freeze),V=(t.seal,t.preventExtensions,t.isFrozen,t.isSealed,t.isExtensible),K=t.getOwnPropertyNames,Z=t.getOwnPropertySymbols,$=(t.getOwnPropertyDescriptor,t.getPrototypeOf),et=t.setPrototypeOf,tt=(r.iterator,Math.ceil,Math.max,Math.min,X(null)),nt=X(null),rt=X(Q),ot={enumerable:!1,writable:!1,configurable:!1,__proto__:Q},it=t.prototype,st=n.prototype,at=o.prototype,lt=i.prototype,ut=s.prototype,ct={get:a,set:l,__proto__:null},pt=(it.hasOwnProperty,st.call),ht=(st.apply,st.bind),dt=at.map,_t=lt.set,ft=lt.get,bt=(lt["delete"],lt.forEach,ut.add),mt=ut["delete"],yt=ut.forEach,vt=ht.bind(ht),gt=vt(pt),wt=gt(dt),Ct=gt(O),jt=gt(P),St=gt(x),Et=gt(q),kt=gt(T),Mt=vt(O),Ot=new i,Pt=new i,xt=_t.bind(Ot),Rt=ft.bind(Ot),Tt=_t.bind(Pt),qt=ft.bind(Pt);d.prototype=G({get:null,set:null,readonly:!1,enumerable:!1,configurable:!1,__proto__:null});var It=!1;E.toString=E,E.user_manuals="This method which called 'toString', simply join the value stored in 'object.user_manuals' as an instance of 'Array'";var Jt=null,At=r("Initor"),Bt=r("SymbolCollection"),Ht=r("FunctionCollection"),Nt=r("ReleaseMethods"),Ft=r("ReleaseClasses"),Lt=r("ClassCollection"),Ut=r("created instance"),Dt=r("__proto__"),Wt=r("primitive prototype"),zt=r("create"),Xt=r("setConst"),Qt=r("addSetConsts"),Yt=r("add member"),Gt=r("remove member"),Vt=r("clear all members"),Kt=r("update and run"),Zt=r("request"),$t=r("unrequest"),en=r("enable"),tn=r("disable"),nn=r("check if enabled, set enable/disable"),rn=r("arguments"),on=r("self"),sn=r("key as Symbol or String"),an=r("jump as Integer"),ln=X(at);ln.length=0;var un=G({Initor:At,SymbolCollection:Bt,FunctionCollection:Ht,ReleaseMethods:Nt,ReleaseClasses:Ft,ClassCollection:Lt,createdInstance:Ut,proto:Dt,primitivePrototype:Wt,create:zt,setConst:Xt,addSetConsts:Qt,addMember:Yt,removeMember:Gt,clear:Vt,update:Kt,request:Zt,unrequest:$t,enable:en,disable:tn,enabled:nn,args:rn,self:on,jump:an,__proto__:null}),cn=G({is_extensible_object:k,is_valid_handler:M,Initor:W,SymbolCollection:N,FunctionCollection:F,ReleaseClasses:U,ReleaseMethods:L,shared_toString:E,_prvEnsureConstructor:p,_prvCheckConstructorInstance:h,_proto_descriptor:(ct.set(null),G(ct)),_proto_getter:a,_proto_setter:l,_DescriptorGetterSetter1os3b:d,_setconst1oVs1v:_,_bindmtdbyname:f,_setmtdfromcore2o1s:b,_setmtdfromcore2os:m,_setkeytokey2os3b:y,_setkeytokey1o2s3b:v,_setkeytokey1o2s3b_inheritable:function(e){It=Boolean(e)},_defgettersetter1o2s:g,_setter:w,_getter:C,_setter_of:j,_getter_of:S,__function_callbind:gt,__setConst:Ct,__addSetConsts:jt,__insertPropertyMapperBefore:St,__executePropertyMappers:Et,__clearAllPropertyMappers:kt,__proto__:null});tt[Xt]=tt._kJs_setConst=O,O.toString=E,O.user_manuals=["void Object::setConst(String name, String value, optional Object descriptor);"],tt[Qt]=tt._kJs_addSetConsts=P,P.toString=E,P.user_manuals=["void Object::addSetConsts(Object clone_target, optional Object descriptor, optional Handler position)","What this method does is adding a setting-constant handler before position","Call _kJs_insertPropertyMapperBefore to see effect"];var pn=new i;tt._kJs_insertPropertyMapperBefore=x,x.toString=E,x.user_manuals=["void Object::insertPropertyMapperBefore(Handler handler, optional Handler position);","When call _kJs_executePropertyMappers, 'handler' will be called before 'position' is called","Handler may skip the rest of executing handler list by assigning arguments[0].jump to 1","Handler may stop the executing process by assigning arguments[0].jump to 2"],tt._kJs_removePropertyMapper=R,R.toString=E,R.user_manuals=["void Object::removePropertyMapper(Handler handler)","removed handler would not execute when call _kJs_executePropertyMappers"],tt._kJs_clearAllPropertyMappers=T,T.toString=E,T.user_manuals=["void Object::clearAllPropertyMappers();","clear all inserted property mappers"],tt._kJs_executePropertyMappers=q,q.toString=E,q.user_manuals=["void Object::executePropertyMappers(optional Object args);","execute all handlers which have been inserted before","Handler may skip the rest of executing handler list by assigning arguments[0].continue to true","Handler may stop the executing process by assigning arguments[0].break to true"],function(e){var t=tt._kJs_prvPropertyMapperParam_prototype=e.prototype=X(Q);It=!0,v(t,"args",rn),v(t,"self",on),v(t,"property",sn),v(t,"jump",an),t[rn]=null,t[on]=null,t[sn]=null,t[an]=0}(I),J.prototype=X({__add:null,__delete:null,_add:function(e){this.__add(e)},_remove:function(e){this.__delete(e)},object:null,handler:null,unrequested:null,add:function(e){return p(H,e,"arguments[0] is not an instance of Civilian"),qt(e)._enter(this),this.object},remove:function(e){return p(H,e,"arguments[0] is not an instance of Civilian"),qt(e)._leave(this),this.object},execute:function(){return this.handler(this.unrequested.size)},__proto__:null}),u(A,function(e){var t=Mt(e);return t("add",null),t("remove",null),t("execute",null),t(Yt,null),t(Gt,null),t(Kt,null),e}(X(Q))),nt._kJs_Republic=rt.Republic=A,A.toString=E,A.user_manuals=["constructor Republic(Handler handler);","method add(Civilian civilian);","method remove(Civilian civilian);","method execute();"],function(e){var t=Mt(e);t("EXECUTE_CASE_ALL_OR_NO",function(e,t){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");if(!M(t))throw new TypeError("arguments[1] is not a valid handler.");return e=e.bind(this),t=t.bind(this),function(n){return(n?t:e)(this)}}),t("EXECUTE_ONLY_WHEN_ALL_REQUESTED",function(e){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");return e=e.bind(this),function(t){return t?null:e(this)}}),t("EXECUTE_ONLY_WHEN_NO_REQUESTED",function(e){if(!M(e))throw new TypeError("arguments[0] is not a valid handler.");return e=e.bind(this),function(t){return t?e(this):null}})}(A),B.prototype=X({__forEach:null,_enter:function(e){var t=this.entered;t.has(e)||(e._add(this),t.add(e))},_leave:function(e){var t=this.entered;t.has(e)&&(e._remove(this),t["delete"](e))},entered:null,object:null,enter:function(e){return p(A,e,"arguments[0] is not an instance of Republic"),this._enter(qt(e)),this.object},leave:function(e){return p(A,e,"arguments[0] is not an instance of Republic"),this._leave(qt(e)),this.object},request:function(){var e=this;return e.entered.forEach(function(t){t._remove(e)}),e.object},unrequest:function(){var e=this;return e.entered.forEach(function(t){t._add(e)}),e.object},update:function(){return this.__forEach(function(e){e.execute()}),this.object},__proto__:null}),u(H,function(e){var t=Mt(e);return t("enter",null),t("leave",null),t("request",null),t("unrequest",null),t("update",null),t(Yt,null),t(Gt,null),t(Zt,null),t($t,null),t(Kt,null),e}(X(Q))),nt._kJs_Civilian=rt.Civilian=H,H.toString=E,H.user_manuals=["constructor Civilian();","method enter(Republic set);","method leave(Republic set);","method request();","method unrequest();","method update();"];var hn=null;N.prototype=un,N.toString=E,N.user_manuals=["constructor Initor::SymbolCollection();","Return value: An object which contains all keys"],N[Ut]=N.created=hn=G(new N),G(N);var dn=null;F.prototype=cn,F.toString=E,F.user_manuals=["function Initor::FunctionCollection();","Return value: An object which contains all utility functions"],F.prototype=cn,F[Ut]=F.created=dn=new F,G(F);var _n=new s;L.toString=E,L.user_manuals=["function Initor::ReleaseMethods(Object object);","Implement all methods from -k-js-abstract.js"],Y(Q,Dt,ct),Y(Q,"__proto__",ct);var fn=new s;U.toString=E,U.user_manuals=["function Initor::ReleaseClasses(Object object);","Release all classes from -k-js-abstract.js to object"],rt._primitive_prototype=rt[Wt]=Q;var bn=null;D.prototype=G(rt),D.toString=E,D.user_manuals=["constructor Initor::ClassCollection();","Return a class collection"],D[Ut]=D.created=bn=G(new D),G(D);var mn=null,yn=e.document.currentScript,vn=yn.getAttributeNS(null,"kjslib-keyword")||"_kJs_Initor";e[vn]=e[At]=W,W.toString=E,W.user_manuals=["constructor Initor();","This constructor is used for create initor of -k-js-abstract.js","Call this constructor once for all"],W.prototype=X(Q),W[Ut]=W.created=mn=G(new W),G(W),L(Q)}(window,Object,Function,Symbol,Array,Map,Set);